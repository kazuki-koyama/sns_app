<div class="modal-dialog modal-dialog-centered" id='modal__new-post' role="document">
  <div class="modal-content">

    <div class="modal-header">
      <h5 class="modal-title" id="newPostLabel">New Post</h5>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>

    <div class="modal-body">
      <!--投稿画像プレビュー-->
      <div class="text-center">
        <img id="before_image_preview" style="width:45%;">
        <img id="after_image_preview" style="width:45%;">
      </div>

      <%= form_with model: @post do |f| %>
        <div class="form-group">
          <%= f.label :before_image %></br>
          <%= f.attachment_field :before_image %>
        </div>
        <div class="form-group">
          <%= f.label :after_image %></br>
          <%= f.attachment_field :after_image %>
        </div>
        <div class="form-group">
          <%= f.label :caption %>
          <%= f.text_area :caption, autofocus: true, autocomplete: "caption", class: 'form-control' %>
        </div>

        <div class="actions text-center py-3">
          <%= f.submit '投稿', class: 'btn__lg btn__purple' %>
        </div>
      <% end %>
    </div>

  </div>
</div>

<!-- モーダルウィンドウ(新規投稿) -->
<div id="new-post" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static"></div>

<script>
// 投稿画像のプレビュー表示
$('#post_before_image').on('change', function (e) {
  var reader = new FileReader();
  reader.onload = function (e) {
    $("#before_image_preview").attr('src', e.target.result);
  }
  reader.readAsDataURL(e.target.files[0]);
});

$('#post_after_image').on('change', function (e) {
  var reader = new FileReader();
  reader.onload = function (e) {
    $("#after_image_preview").attr('src', e.target.result);
  }
  reader.readAsDataURL(e.target.files[0]);
});
</script>